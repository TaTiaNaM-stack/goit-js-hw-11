{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst query = input.value;\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = '54321863-b2668d69a653290eef8a021dd';\nexport default async function getImagesByQuery(query){\n    const response = await axios.get(BASE_URL, {\n        params: {\n        key: API_KEY,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        q: query\n    }\n\n});\n    const options = response.data;\n    return options;\n}\n\n\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\nimport getImagesByQuery from './pixabay-api.js';\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst imageContainer = document.querySelector('.gallery');\ngetImagesByQuery();\nconst options = { \n     tags: 'alt',\n    largeImageURL: 'data-source',\n    webformatURL: 'src',\n    likes: 0,\n    views: 0,\n    comments: 0,\n    downloads: 0\n}\nconst lightbox = new SimpleLightbox('.gallery_item a', options);\n\nexport default function createGallery(images = [], options = {}) {\n    const imagesMarkup = images.map(({id, pageURL}) => {\n        return `<li class=\"gallery_item\" id=\"${id}\">\n    <a href=\"${pageURL}\"><img src=\"${options.webformatURL}\"  data-source=\"${options.largeImageURL} alt=\"${options.tags}\" loading=\"lazy\" class=\"gallery_image\"/>\n    <div class=\"info\">\n        <p class=\"info_item\">\n            <b>Likes</b> ${options.likes}\n        </p>\n        <p class=\"info_item\">   \n            <b>Views</b> ${options.views}\n        </p>\n        <p class=\"info_item\">\n            <b>Comments</b> ${options.comments}\n        </p>\n        <p class=\"info_item\">\n            <b>Downloads</b> ${options.downloads}\n        </p>\n    </div>\n    </a>\n    </li>`;\n    })\n    .join('');\n    lightbox.refresh();\n    return imagesMarkup;\n};\n\n\nexport function clearGallery(){\n    imageContainer.innerHTML = '';\n};\n\nexport function showLoader(){\nconst loader = document.querySelector('.loader');\nclass Loader {\n    constructor() {\n        this.loader = document.createElement('div');\n       \n        document.body.appendChild(this.loader);\n    }\n}\nnew Loader();\n};\n\nexport function hideLoader(){\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.style.display = 'none';\n        document.body.removeChild(loader);\n    }\n};\n\nexport function appendImagesToGallery(imagesMarkup){\n    imageContainer.insertAdjacentHTML('beforeend', imagesMarkup);\n}\n","import './css/styles.css';\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\n// import appendImagesToGallery from './js/render-functions.js';\nimport createGallery, {clearGallery, appendImagesToGallery} from './js/render-functions.js';\nimport {showLoader, hideLoader}  from './js/render-functions.js';\nimport getImagesByQuery from './js/pixabay-api.js';\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst imageContainer = document.querySelector('.gallery');\n\n \nconst imagesPerPage = 12;\nform.addEventListener('submit', onSearch);\n\nasync function onSearch(event){\n    event.preventDefault();\n    const query = input.value.trim();\n    if (query === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n            position: 'topRight'\n        });\n        return;\n    }\n    clearGallery();\n    showLoader();\n    try {\n        const dataImg = await getImagesByQuery(query);\n        console.log(dataImg);\n        if (dataImg.hits.length === 0) {\n            iziToast.error({\n                title: 'No Results',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        } else {\n            appendImagesToGallery(createGallery(dataImg.hits));\n            iziToast.success({\n                title: 'Success',\n                message: `Found ${dataImg.totalHits} images.`,\n                position: 'topRight'\n            });\n        }\n    } catch (error) {\n        console.log(error.message);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images.',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\n\n\n\n\n\n// const query = input.value;\n// axios.defaults.baseURL = 'https://pixabay.com/api/';\n// axios.defaults.headers.common['x-api-key'] = import.meta.env.VITE_API_KEY;\n// var VITE_API_KEY = '54321863-b2668d69a653290eef8a021dd';\n// var URL = \"https://pixabay.com/api/?key=\"+VITE_API_KEY+\"&q=\"+encodeURIComponent('red roses');\n      \n// axios.defaults.params = {\n//     key: '54321863-b2668d69a653290eef8a021dd',\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//     q: query,\n//     page: currentPage,\n//     per_page: imagesPerPage\n// };\n\n// axios.get(`?q=${query}`)\n//     .then(({data}) => {\n//         appendImagesToGallery(data.hits);\n\n//     })\n//     .catch(error => console.error('Error:', error));\n\n// window.addEventListener('scroll', async () => {\n//     if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {\n//         currentPage += 1;\n//         showLoader();\n//         try {\n//             const data = await getImagesByQuery(`${query}&page=${currentPage}&per_page=${imagesPerPage}`);\n//             if (data.hits.length > 0) {\n//                 createGallery(data.hits);\n//             }\n//         } catch (error) {\n//             iziToast.error({\n//                 title: 'Error', \n//                 message: 'An error occurred while fetching more images.',\n//                 position: 'topRight'\n//             });\n//         } finally {\n//             hideLoader();\n//         }\n//     }\n// });\n"],"names":["input","BASE_URL","API_KEY","getImagesByQuery","query","axios","imageContainer","options","lightbox","SimpleLightbox","createGallery","images","imagesMarkup","id","pageURL","clearGallery","showLoader","Loader","hideLoader","loader","appendImagesToGallery","form","onSearch","event","iziToast","dataImg","error"],"mappings":"+vBACA,MAAMA,EAAQ,SAAS,cAAc,2BAA2B,EAClDA,EAAM,MACpB,MAAMC,EAAW,2BACXC,EAAU,qCACD,eAAeC,EAAiBC,EAAM,CAYjD,OAXiB,MAAMC,EAAM,IAAIJ,EAAU,CACvC,OAAQ,CACR,IAAKC,EACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAGE,CACN,CAEL,CAAC,GAC4B,IAE7B,CCbA,MAAME,EAAiB,SAAS,cAAc,UAAU,EACxDH,IACA,MAAMI,EAAU,CACX,KAAM,MACP,cAAe,cACf,aAAc,MACd,MAAO,EACP,MAAO,EACP,SAAU,EACV,UAAW,CACf,EACMC,EAAW,IAAIC,EAAe,kBAAmBF,CAAO,EAE/C,SAASG,EAAcC,EAAS,GAAIJ,EAAU,CAAA,EAAI,CAC7D,MAAMK,EAAeD,EAAO,IAAI,CAAC,CAAC,GAAAE,EAAI,QAAAC,CAAO,IAClC,gCAAgCD,CAAE;AAAA,eAClCC,CAAO,eAAeP,EAAQ,YAAY,mBAAmBA,EAAQ,aAAa,SAASA,EAAQ,IAAI;AAAA;AAAA;AAAA,2BAG3FA,EAAQ,KAAK;AAAA;AAAA;AAAA,2BAGbA,EAAQ,KAAK;AAAA;AAAA;AAAA,8BAGVA,EAAQ,QAAQ;AAAA;AAAA;AAAA,+BAGfA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,UAK3C,EACA,KAAK,EAAE,EACR,OAAAC,EAAS,QAAO,EACTI,CACX,CAGO,SAASG,GAAc,CAC1BT,EAAe,UAAY,EAC/B,CAEO,SAASU,GAAY,CACb,SAAS,cAAc,SAAS,EAC/C,MAAMC,CAAO,CACT,aAAc,CACV,KAAK,OAAS,SAAS,cAAc,KAAK,EAE1C,SAAS,KAAK,YAAY,KAAK,MAAM,CACxC,CACL,CACA,IAAIA,CACJ,CAEO,SAASC,GAAY,CACxB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,IACAA,EAAO,MAAM,QAAU,OACvB,SAAS,KAAK,YAAYA,CAAM,EAExC,CAEO,SAASC,EAAsBR,EAAa,CAC/CN,EAAe,mBAAmB,YAAaM,CAAY,CAC/D,CCvDA,MAAMS,EAAO,SAAS,cAAc,OAAO,EACrCrB,EAAQ,SAAS,cAAc,2BAA2B,EACzC,SAAS,cAAc,UAAU,EAIxDqB,EAAK,iBAAiB,SAAUC,CAAQ,EAExC,eAAeA,EAASC,EAAM,CAC1BA,EAAM,eAAe,EACf,MAAAnB,EAAQJ,EAAM,MAAM,KAAK,EAC/B,GAAII,IAAU,GAAI,CACdoB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UAAA,CACb,EACD,MACJ,CACaT,IACFC,IACP,GAAA,CACM,MAAAS,EAAU,MAAMtB,EAAiBC,CAAK,EAC5C,QAAQ,IAAIqB,CAAO,EACfA,EAAQ,KAAK,SAAW,EACxBD,EAAS,MAAM,CACX,MAAO,aACP,QAAS,2EACT,SAAU,UAAA,CACb,GAEqBJ,EAAAV,EAAce,EAAQ,IAAI,CAAC,EACjDD,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,SAASC,EAAQ,SAAS,WACnC,SAAU,UAAA,CACb,SAEAC,EAAO,CACJ,QAAA,IAAIA,EAAM,OAAO,EACzBF,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2CACT,SAAU,UAAA,CACb,CAAA,QACH,CACaN,GACf,CACJ"}