{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nexport default function getImagesByQuery(query){\n return axios.get(`?${query}`)\n.then(({data}) => data)\n.catch(error => {\n    console.log(error)\n});\n}\n\n\n\n\n","const imageContainer = document.querySelector('.gallery');\n\nexport default function createGallery(images = []){\n    return images.map(({id, pageURL}) => `<li class=\"gallery__item\" id=\"${id}\">\n    <a href=\"${pageURL}\">\n    </li>`)\n    // const markup = images.map((image) => {\n    //     return `<div class=\"gallery\">\n    //                 <a href=\"images/image1.jpg\"><img src=\"images/thumbs/thumb1.jpg\" alt=\"\" title=\"\"></a>\n    //                 <a href=\"images/image2.jpg\"><img src=\"images/thumbs/thumb2.jpg\" alt=\"\" title=\"Beautiful Image\"></a>\n    //             </div>`\n    // })\n    .join('');\n};\n const gallery = document.querySelector('.gallery');\n\nexport function clearGallery(){\n    imageContainer.innerHTML = '';\n};\n\nexport function showLoader(){\n    const loader = document.createElement('div');\n    loader.className = 'Loading images, please wait...';\n    document.body.appendChild(loader);\n    loader.style.display = 'block';\n    loader.style.position = 'fixed';\n    loader.style.top = '50%';\n    loader.style.left = '50%';\n    loader.style.transform = 'translate(-50%, -50%)';\n    loader.style.padding = '20px';\n    loader.style.backgroundColor = '#fff';\n    loader.style.color = 'rgba(0, 0, 0, 0.8)';\n};\n\nexport function hideLoader(){\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.style.display = 'none';\n        document.body.removeChild(loader);\n    }\n};\n","import fetchData from './js/pixabay-api.js';\nimport moduleName from './js/render-functions.js';\nimport './css/styles.css';\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\nimport createGallery, {clearGallery} from './js/render-functions.js';\nimport {showLoader, hideLoader}  from './js/render-functions.js';\nimport getImagesByQuery from './js/pixabay-api.js';\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst imageContainer = document.querySelector('.gallery');\nlet currentPage = 1;\n \nconst imagesPerPage = 12;\nform.addEventListener('submit', onSearch);\n\nasync function onSearch(event){\n    event.preventDefault();\n    const query = input.value.trim();\n    if (query === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n            position: 'topRight'\n        });\n        return;\n    }\n    clearGallery();\n    showLoader();\n\n    currentPage = 1;\n    try {\n        const data = await getImagesByQuery(`?${query}&page=${currentPage}&per_page=${imagesPerPage}`);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'No Results',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        } else {\n            createGallery(data.hits);\n            iziToast.success({\n                title: 'Success',\n                message: `Found ${data.totalHits} images.`,\n                position: 'topRight'\n            });\n        }\n    } catch (error) {\n        console.log(error.message);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images.',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader();\n    }\n}\nconst query = input.value;\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.headers.common['x-api-key'] = import.meta.env.VITE_API_KEY;\nvar VITE_API_KEY = '54321863-b2668d69a653290eef8a021dd';\nvar URL = \"https://pixabay.com/api/?key=\"+VITE_API_KEY+\"&q=\"+encodeURIComponent('red roses');\n      \naxios.defaults.params = {\n    key: '54321863-b2668d69a653290eef8a021dd',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    q: query,\n    page: currentPage,\n    per_page: imagesPerPage\n};\n\naxios.get(`?q=${query}`)\n    .then(({data}) => {\n        const imageMarkup = createGallery(data.hits);\n        imageContainer.insertAdjacentHTML('beforeend', imageMarkup);\n\n    })\n    .catch(error => console.error('Error:', error));\n\n// window.addEventListener('scroll', async () => {\n//     if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {\n//         currentPage += 1;\n//         showLoader();\n//         try {\n//             const data = await getImagesByQuery(`${query}&page=${currentPage}&per_page=${imagesPerPage}`);\n//             if (data.hits.length > 0) {\n//                 createGallery(data.hits);\n//             }\n//         } catch (error) {\n//             iziToast.error({\n//                 title: 'Error', \n//                 message: 'An error occurred while fetching more images.',\n//                 position: 'topRight'\n//             });\n//         } finally {\n//             hideLoader();\n//         }\n//     }\n// });\n"],"names":["axios","getImagesByQuery","query","data","error","imageContainer","createGallery","images","id","pageURL","clearGallery","showLoader","loader","hideLoader","form","input","currentPage","imagesPerPage","onSearch","event","iziToast","imageMarkup"],"mappings":"mvBACAA,EAAM,SAAS,QAAU,2BACV,SAASC,EAAiBC,EAAM,CAC9C,OAAOF,EAAM,IAAI,IAAIE,CAAK,EAAE,EAC5B,KAAK,CAAC,CAAC,KAAAC,CAAI,IAAMA,CAAI,EACrB,MAAMC,GAAS,CACZ,QAAQ,IAAIA,CAAK,CACrB,CAAC,CACD,CCRA,MAAMC,EAAiB,SAAS,cAAc,UAAU,EAEzC,SAASC,EAAcC,EAAS,GAAG,CAC9C,OAAOA,EAAO,IAAI,CAAC,CAAC,GAAAC,EAAI,QAAAC,CAAO,IAAM,iCAAiCD,CAAE;AAAA,eAC7DC,CAAO;AAAA,UACZ,EAOL,KAAK,EAAE,CACZ,CACiB,SAAS,cAAc,UAAU,EAE3C,SAASC,GAAc,CAC1BL,EAAe,UAAY,EAC/B,CAEO,SAASM,GAAY,CACxB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,iCACnB,SAAS,KAAK,YAAYA,CAAM,EAChCA,EAAO,MAAM,QAAU,QACvBA,EAAO,MAAM,SAAW,QACxBA,EAAO,MAAM,IAAM,MACnBA,EAAO,MAAM,KAAO,MACpBA,EAAO,MAAM,UAAY,wBACzBA,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,gBAAkB,OAC/BA,EAAO,MAAM,MAAQ,oBACzB,CAEO,SAASC,GAAY,CACxB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,IACAA,EAAO,MAAM,QAAU,OACvB,SAAS,KAAK,YAAYA,CAAM,EAExC,CCvBA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,2BAA2B,EAC1DV,EAAiB,SAAS,cAAc,UAAU,EACxD,IAAIW,EAAc,EAElB,MAAMC,EAAgB,GACtBH,EAAK,iBAAiB,SAAUI,CAAQ,EAExC,eAAeA,EAASC,EAAM,CAC1BA,EAAM,eAAe,EACfjB,MAAAA,EAAQa,EAAM,MAAM,KAAK,EAC/B,GAAIb,IAAU,GAAI,CACdkB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UAAA,CACb,EACD,MACJ,CACaV,IACFC,IAEGK,EAAA,EACV,GAAA,CACM,MAAAb,EAAO,MAAMF,EAAiB,IAAIC,CAAK,SAASc,CAAW,aAAaC,CAAa,EAAE,EACzFd,EAAK,KAAK,SAAW,EACrBiB,EAAS,MAAM,CACX,MAAO,aACP,QAAS,2EACT,SAAU,UAAA,CACb,GAEDd,EAAcH,EAAK,IAAI,EACvBiB,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,SAASjB,EAAK,SAAS,WAChC,SAAU,UAAA,CACb,SAEAC,EAAO,CACJ,QAAA,IAAIA,EAAM,OAAO,EACzBgB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2CACT,SAAU,UAAA,CACb,CAAA,QACH,CACaP,GACf,CACJ,CACA,MAAMX,EAAQa,EAAM,MACpBf,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAI,OAI7CA,EAAM,SAAS,OAAS,CACpB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAGE,EACH,KAAMc,EACN,SAAUC,CACd,EAEAjB,EAAM,IAAI,MAAME,CAAK,EAAE,EAClB,KAAK,CAAC,CAAC,KAAAC,KAAU,CACR,MAAAkB,EAAcf,EAAcH,EAAK,IAAI,EAC5BE,EAAA,mBAAmB,YAAagB,CAAW,CAE9D,CAAC,EACA,MAAMjB,GAAS,QAAQ,MAAM,SAAUA,CAAK,CAAC"}