{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default function getImagesByQuery(query){\n return axios.get(`/${query}`)\n.then(({data}) => data)\n.catch(console.error(error.message));\n}\n\nconst input = document.querySelector('input[name=\"search-text\"]');\nimport axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\n\n\n","export default function createGallery(images){\n    const markup = images.map((image) => {\n        return `<div class=\"gallery\">\n                    <a href=\"images/image1.jpg\"><img src=\"images/thumbs/thumb1.jpg\" alt=\"\" title=\"\"></a>\n                    <a href=\"images/image2.jpg\"><img src=\"images/thumbs/thumb2.jpg\" alt=\"\" title=\"Beautiful Image\"></a>\n                </div>`\n    })\n    .jin('');\n    images.refresh();\n    imageContainer.innerHTML = markup;\n\n};\n\nexport function clearGallery(){\n    imageContainer.innerHTML = '';\n};\n\nexport function showLoader(){\n    const loader = document.createElement('div');\n    loader.className = 'Loading images, please wait...';\n    document.body.appendChild(loader);\n    loader.style.display = 'block';\n    loader.style.position = 'fixed';\n    loader.style.top = '50%';\n    loader.style.left = '50%';\n    loader.style.transform = 'translate(-50%, -50%)';\n    loader.style.padding = '20px';\n    loader.style.backgroundColor = '#fff';\n    loader.style.color = 'rgba(0, 0, 0, 0.8)';\n};\n\nexport function hideLoader(){\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.style.display = 'none';\n        document.body.removeChild(loader);\n    }\n};\n","import fetchData from './js/pixabay-api.js';\nimport moduleName from './js/render-functions.js';\nimport './css/styles.css';\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\n\nimport {showLoader, hideLoader}  from './js/render-functions.js';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst imageContainer = document.querySelector('.gallery-container');\nlet currentPage = 1;\nlet currentQuery = '';\nconst imagesPerPage = 12;\nform.addEventListener('submit', onSearch);\n\nasync function onSearch(event){\n    event.preventDefault();\n    const query = input.value.trim();\n    if (query === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n            position: 'topRight'\n        });\n        return;\n    }\n    clearGallery();\n    showLoader();\n    currentQuery = query;\n    currentPage = 1;\n    try {\n        const data = await getImagesByQuery(`${currentQuery}&page=${currentPage}&per_page=${imagesPerPage}`);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'No Results',\n                message: 'No images found for your query. Please try again.',\n                position: 'topRight'\n            });\n        } else {\n            createGallery(data.hits);\n            iziToast.success({\n                title: 'Success',\n                message: `Found ${data.totalHits} images.`,\n                position: 'topRight'\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images.',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\nwindow.addEventListener('scroll', async () => {\n    if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {\n        currentPage += 1;\n        showLoader();\n        try {\n            const data = await getImagesByQuery(`${currentQuery}&page=${currentPage}&per_page=${imagesPerPage}`);\n            if (data.hits.length > 0) {\n                createGallery(data.hits);\n            }\n        } catch (error) {\n            iziToast.error({\n                title: 'Error', \n                message: 'An error occurred while fetching more images.',\n                position: 'topRight'\n            });\n        } finally {\n            hideLoader();\n        }\n    }\n});\n"],"names":["axios","showLoader","loader","hideLoader","form","input","currentPage","currentQuery","imagesPerPage","onSearch","event","query","iziToast","data"],"mappings":"wvBAMc,SAAS,cAAc,2BAA2B,EAEhEA,EAAM,SAAS,QAAU,2BCSlB,SAASC,GAAY,CACxB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,iCACnB,SAAS,KAAK,YAAYA,CAAM,EAChCA,EAAO,MAAM,QAAU,QACvBA,EAAO,MAAM,SAAW,QACxBA,EAAO,MAAM,IAAM,MACnBA,EAAO,MAAM,KAAO,MACpBA,EAAO,MAAM,UAAY,wBACzBA,EAAO,MAAM,QAAU,OACvBA,EAAO,MAAM,gBAAkB,OAC/BA,EAAO,MAAM,MAAQ,oBACzB,CAEO,SAASC,GAAY,CACxB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,IACAA,EAAO,MAAM,QAAU,OACvB,SAAS,KAAK,YAAYA,CAAM,EAExC,CCpBA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,2BAA2B,EACzC,SAAS,cAAc,oBAAoB,EAClE,IAAIC,EAAc,EACdC,EAAe,GACnB,MAAMC,EAAgB,GACtBJ,EAAK,iBAAiB,SAAUK,CAAQ,EAExC,eAAeA,EAASC,EAAM,CAC1BA,EAAM,eAAc,EACpB,MAAMC,EAAQN,EAAM,MAAM,KAAI,EAC9B,GAAIM,IAAU,GAAI,CACdC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MACH,CACD,eACAX,IACAM,EAAeI,EACfL,EAAc,EACd,GAAI,CACA,MAAMO,EAAO,MAAM,iBAAiB,GAAGN,CAAY,SAASD,CAAW,aAAaE,CAAa,EAAE,EAC/FK,EAAK,KAAK,SAAW,EACrBD,EAAS,MAAM,CACX,MAAO,aACP,QAAS,oDACT,SAAU,UAC1B,CAAa,GAED,cAAcC,EAAK,IAAI,EACvBD,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,SAASC,EAAK,SAAS,WAChC,SAAU,UAC1B,CAAa,EAER,MAAe,CACZD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2CACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNT,GACH,CACL,CAEA,OAAO,iBAAiB,SAAU,SAAY,CAC1C,GAAI,OAAO,YAAc,OAAO,SAAW,SAAS,KAAK,aAAe,IAAK,CACzEG,GAAe,EACfL,IACA,GAAI,CACA,MAAMY,EAAO,MAAM,iBAAiB,GAAGN,CAAY,SAASD,CAAW,aAAaE,CAAa,EAAE,EAC/FK,EAAK,KAAK,OAAS,GACnB,cAAcA,EAAK,IAAI,CAE9B,MAAe,CACZD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gDACT,SAAU,UAC1B,CAAa,CACb,QAAkB,CACNT,GACH,CACJ,CACL,CAAC"}